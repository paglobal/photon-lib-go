(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const r of t.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function o(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?t.credentials="include":e.crossorigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function n(e){if(e.ep)return;e.ep=!0;const t=o(e);fetch(e.href,t)}})();function l(){const c=new WebSocket("ws://127.0.0.1:53174/ipc");c.addEventListener("open",()=>{c.addEventListener("message",o=>{var e,t;const n=JSON.parse(o.data);(e=s.onEvents.get(n.event))==null||e.forEach(r=>{r(n.payload)}),(t=s.onceEvents.get(n.event))==null||t.forEach(r=>{r(n.payload),s.onceEvents.delete(n.event)})})}),c.addEventListener("close",()=>{console.error("IPC connection terminated. Attempting to re-establish connection..."),setTimeout(()=>{l().on("open",()=>location.reload())},1e3)});const s={on:(o,n)=>{switch(o){case"open":case"close":case"error":return c.addEventListener(o,n);default:return s.registerEvent(o,n,"on")}},once:(o,n)=>s.registerEvent(o,n,"once"),registerEvent:(o,n,e)=>{const t=s[`${e}Events`];t.has(o)||t.set(o,[]);const r=t.get(o);return r.push(n),()=>{const d=r.indexOf(n);d>-1&&r.splice(d,1),r.length===0&&t.delete(o)}},emit:(o,n)=>{c.send(JSON.stringify({event:o,payload:n}))},onEvents:new Map,onceEvents:new Map};return s}const p=l();var a=p,u=document.getElementById("input"),i=document.getElementById("output"),f=document.querySelector("button");const m=()=>{a.emit("message",{message:u.value}),u.value=""};f.addEventListener("click",m);a.on("open",()=>{i.innerHTML+=`Status: Connected
`});a.on("message",c=>{i.innerHTML+="Server: "+c.message+`
`,i.innerHTML+="Server: "+c.id+`
`});
